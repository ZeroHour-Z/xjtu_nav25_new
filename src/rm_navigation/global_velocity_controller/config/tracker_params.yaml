global_velocity_controller:
  ros__parameters:
    # Path tracking
    lookahead_distance: 1.5  # 增大前瞻距离，陀螺时更稳定
    target_speed: 1.0  # 降低目标速度，先保证跟踪稳定
    heading_kp: 1.0
    external_override_timeout: 0.2
    # Heading prediction factor (0.0~1.0)
    # 【关键】陀螺旋转时必须预测未来角度，设为2.0表示预测2个控制周期后的角度
    prediction_time_factor: 3.0

    enable_dynamic_lookahead: false  # 陀螺时禁用动态前瞻，用固定大值
    min_lookahead_distance: 1.0  # 提高最小前瞻
    max_lookahead_distance: 2.0  # 提高最大前瞻

    curvature_window_distance: 1.0
    curvature_low: 0.1
    curvature_high: 1.0

    # Goal handling / slow-down near goal
    slow_down_distance: 0.5
    min_target_speed: 0.03
    goal_position_tolerance: 0.15  # 放宽目标容差
    goal_yaw_tolerance: 6.28
    final_heading_switch_distance: 0.3 
