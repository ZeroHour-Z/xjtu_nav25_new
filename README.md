# XJTU_nav2025

ä»ROS1è¿ç§»è€Œæ¥ï¼Œä¿ç•™äº†ç‰¹è‰²åŠŸèƒ½å’Œé€šä¿¡æ¨¡å—ã€‚åŒæ—¶å‚è€ƒæ·±åŒ—è«å¯¼èˆªå¼€æºã€ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦å¯¼èˆªå¼€æºç­‰å¼€æºå®ç°æŠ€æœ¯çš„è¿­ä»£ä¸è¿›æ­¥ã€‚

## å·²ç»å®ç°çš„åŠŸèƒ½

### 1. å¤šä¼ æ„Ÿå™¨æ•°æ®é‡‡é›†ä¸å¤„ç†
- **Livoxæ¿€å…‰é›·è¾¾é©±åŠ¨æ”¯æŒ**ï¼šé›†æˆlivox_ros_driver2ï¼Œå®ç°é«˜é¢‘ç‚¹äº‘æ•°æ®é‡‡é›†
- **ç‚¹äº‘æ•°æ®è½¬æ¢**ï¼šlivox_to_pointcloud2æ¨¡å—ï¼Œæ”¯æŒå¤šç§ç‚¹äº‘æ ¼å¼è½¬æ¢
- **IMUæ•°æ®èåˆ**ï¼šimu_complementary_filterå®ç°IMUæ•°æ®äº’è¡¥æ»¤æ³¢
- **ç‚¹äº‘è½¬æ¿€å…‰é›·è¾¾æ•°æ®**ï¼špointcloud_to_laserscanå®ç°ä¼ æ„Ÿå™¨æ•°æ®æ ¼å¼è½¬æ¢

### 2. é«˜ç²¾åº¦å®šä½ç³»ç»Ÿ
- **Fast-LIOå®šä½ç®—æ³•**ï¼šé›†æˆFAST_LIOå’ŒPoint-LIOç®—æ³•ï¼Œå®ç°é«˜ç²¾åº¦æ¿€å…‰é›·è¾¾æƒ¯æ€§é‡Œç¨‹è®¡
- **ROS2å®šä½å°è£…**ï¼šfast_lio_localization_ros2æä¾›å®Œæ•´çš„å®šä½ROS2æ¥å£
- **å®æ—¶å®šä½æœåŠ¡**ï¼šæ”¯æŒç‚¹äº‘åœ°å›¾åŒ¹é…å®šä½ï¼Œé€‚ç”¨äºå®¤å†…å¤–å¤æ‚ç¯å¢ƒ

### 3. åœ°å½¢æ„ŸçŸ¥ä¸åˆ†æ
- **å®æ—¶åœ°å½¢åˆ†æ**ï¼šrm_taæ¨¡å—å®ç°åŸºäºç‚¹äº‘çš„å¯é€šè¡Œæ€§åˆ†æ
- **åœ°é¢åˆ†å‰²ç®—æ³•**ï¼šlinefit_ground_segementation_ros2å®ç°çº¿æ‹Ÿåˆåœ°é¢åˆ†å‰²
- **åŠ¨æ€ä»£ä»·åœ°å›¾ç”Ÿæˆ**ï¼šæ”¯æŒå®æ—¶åœ°å½¢ä»£ä»·åœ°å›¾æ„å»ºå’Œæ›´æ–°
- **RVizå¯è§†åŒ–é›†æˆ**ï¼šæä¾›åœ°å½¢åˆ†æç»“æœçš„RVizå¯è§†åŒ–ç•Œé¢

### 4. è¡Œä¸ºæ ‘å†³ç­–æ¡†æ¶
- **PyTreesè¡Œä¸ºæ ‘**ï¼šåŸºäºpy_treesçš„ROS2è¡Œä¸ºæ ‘æ¡†æ¶
- **çµæ´»é…ç½®æ–¹å¼**ï¼šæ”¯æŒYAMLé…ç½®å’ŒPythonç›´å†™ä¸¤ç§æ–¹å¼æ„å»ºè¡Œä¸ºæ ‘
- **Nav2åŠ¨ä½œé€‚é…**ï¼šæ— ç¼é›†æˆNavigateToPoseç­‰Nav2å¯¼èˆªåŠ¨ä½œ
- **Webå¯è§†åŒ–**ï¼šæ”¯æŒpy_trees_js Webç•Œé¢å®æ—¶ç›‘æ§è¡Œä¸ºæ ‘çŠ¶æ€
- **è¡¥ç»™ç®¡ç†åŠŸèƒ½**ï¼šå†…ç½®SupplyManagerActionå®ç°æ™ºèƒ½è¡¥ç»™ç­–ç•¥

### 5. å¯¼èˆªæ§åˆ¶ç³»ç»Ÿ
- **Nav2å®¢æˆ·ç«¯**ï¼šnav2_client_cppæä¾›C++å¯¼èˆªå®¢æˆ·ç«¯æ¥å£
- **å…¨å±€é€Ÿåº¦æ§åˆ¶å™¨**ï¼šglobal_velocity_controllerå®ç°å…¨å±€è·¯å¾„é€Ÿåº¦è§„åˆ’å’Œloopbackçš„Odomä»¿çœŸ
- **äº¤äº’å¼éšœç¢ç‰©ç®¡ç†**ï¼šrviz_click_obstaclesæ”¯æŒåœ¨RVizä¸­ç‚¹å‡»è®¾ç½®éšœç¢ç‰©
- **åŠ¨æ€éšœç¢ç‰©å±‚**ï¼šclick_obstacles_layerå®ç°åŠ¨æ€éšœç¢ç‰©åœ°å›¾å±‚ç®¡ç†

### 6. é€šä¿¡æ¨¡å—
- **ROS2é€šä¿¡æ¡†æ¶**ï¼šrm_comm_ros2æä¾›å®Œæ•´çš„ROS2é€šä¿¡è§£å†³æ–¹æ¡ˆ
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ”¯æŒçµæ´»çš„é€šä¿¡æ‹“æ‰‘ç»“æ„é…ç½®

## å¾…å®ç°çš„åŠŸèƒ½

### TODO
1. å¯¼èˆªç‚¹æ£€æµ‹
2. åœ°å½¢åˆ†æå°šæœªå®Œå–„(ä½œä¸ºè€ƒæ ¸)
3. é€šä¿¡å’Œå†³ç­–å°šæœªè¿›è¡Œé€‚é…
4. LOGå’Œreplay(ä½œä¸ºè€ƒæ ¸)

### DONE

bfsè„±å›°

## æˆ‘çš„æ„¿æ™¯

åšè¿™ä¸ªçš„æœ€åˆç›®çš„æ˜¯æ¸…ç†åœ¨ROS1æ¡†æ¶ä¸‹è¿­ä»£å‡ºæ¥çš„çŸ³å±±å’Œä½æ°´å¹³ä»£ç ã€‚
æ„å»ºä¸€ä¸ªè¶³å¤Ÿç®€å•ã€æ¸…æ™°å’Œæ ‡å‡†åŒ–çš„æ¡†æ¶ï¼Œä»¥å¤Ÿç”¨çš„æ°´å‡†(æˆ‘çš„æ°´å¹³å¾ˆéš¾å®ç°ä¼˜ç§€çš„æ°´å‡†)å®ŒæˆRMULå’ŒRMUCèµ›äº‹ï¼Œåœ¨è‡ªæˆ‘å­¦ä¹ çš„è¿‡ç¨‹ä¸­æ¨åŠ¨robomasteræ¯”èµ›ä¸Šä½æœºå¯¼èˆªç®—æ³•çš„äº¤æµå’Œå‘å±•ã€‚

## é…ç½®ç¯å¢ƒ

### git submodule

```bash
git submodule update --init --recursive --depth 1
```

### rosdep 

```bash
rosdep init 
rosdep update
rosdep install --from-paths src --ignore-src -r -y  
```

### ç¼–è¯‘

é‡è¦ï¼åœ¨ä»»ä½•æ—¶å€™ç¼–è¯‘çš„æ—¶å€™è¯·åŠ¡å¿…ä½¿ç”¨--symlink-installï¼å¦åˆ™æŸäº›åŸºäºpathlibè§£æçš„ç›¸å¯¹è·¯å¾„å’ŒåŠŸèƒ½åŒ…è·¯å¾„ä¼šå‡ºç°é”™è¯¯ï¼åˆ°æ—¶å€™ä½ å°±ç­‰ç€debugå»å§ğŸ˜…


### å¯åŠ¨

å¯åŠ¨ä»¥ä¸‹å‡ ä¸ªlaunchæ–‡ä»¶å³å¯

1. å¯åŠ¨é›·è¾¾é©±åŠ¨,å‘å¸ƒç‚¹äº‘
```bash
ros2 launch livox_ros_driver2 msg_MID360_launch.py # 
```

2. å¯åŠ¨é‡Œç¨‹è®¡å’Œå®šä½

> è¿ç§»åˆ°ros2ä¹‹å,point_lioçš„å»¶è¿Ÿå˜å¾—å¤§ä¸”ä¸ç¨³å®š,åŸå› æœªçŸ¥,æš‚æ—¶ä¸å»ºè®®åœ¨çº¿è·‘ã€‚

```bash
ros2 launch rm_bringup SLAM_mapping.py backend:=point_lio rviz:=true  # ä»…å»ºå›¾
ros2 launch rm_bringup SLAM_odom_only.py backend:=faster_lio rviz:=true # ä»…é‡Œç¨‹è®¡
ros2 launch rm_bringup SLAM_and_localize.py backend:=faster_lio rviz:=true # å¯åŠ¨é‡å®šä½å’Œé‡Œç¨‹è®¡
```

3. (å®éªŒæ€§å†…å®¹)å¯åŠ¨åœ°å½¢åˆ†æ,è¾“å‡º`/traversability/obstacles`å’Œ`/traversability/ground`

```bash
ros2 launch rm_ta bag_livox_ta.launch.py 
```

4. å¯åŠ¨`nav_stack`

```bash
ros2 launch nav2_client_cpp nav2_stack_with_gvc.launch.py # è¿˜éœ€è¦æ”¹è¿›
```

æˆ–è€…ä½¿ç”¨ä»¿çœŸæ¨¡å¼,å¯ä»¥ç”¨æ¥æµ‹è¯•å†³ç­–

```bash
ros2 launch nav2_client_cpp nav2_stack_with_gvc_sim.launch.py
```

å¯åŠ¨å†³ç­–(è¿˜æ²¡æµ‹):
```bash
ros2 launch rm_bt_decision bt.launch.py  
```

5. å¯åŠ¨é€šä¿¡èŠ‚ç‚¹

```bash
ros2 launch rm_comm_ros2 rm_comm_bringup.launch.py
```